(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54ceb5d2","chunk-2d21ab96"],{"1e4b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"g-body"},[n("el-row",{staticClass:"g-head",attrs:{type:"flex"}},[n("a",{staticClass:"logo",attrs:{target:"_blank"}},[t._v("店铺后台管理")]),n("div",{staticClass:"nav"},[t.user.id?n("div",{staticClass:"usermenu"},[t._v(" 欢迎您："+t._s(t.user.name)+" "),n("router-link",{attrs:{to:{path:"/"}}},[n("i",{staticClass:"el-icon-location"}),t._v("首页")]),n("a",{attrs:{href:"javascript:;"},on:{click:t.logout}},[n("i",{staticClass:"el-icon-circle-close"}),t._v("退出")])],1):t._e()])]),n("el-menu",{staticClass:"g-side",attrs:{"default-active":t.activeMenu,router:""}},[t._l(t.menus,(function(e,i){return[e.children?[n("el-submenu",{key:i,attrs:{index:e.name}},[n("template",{slot:"title"},[t._v(" "+t._s(e.meta.name||e.name))]),t._l(e.children,(function(e,i){return n("el-menu-item",{key:i,attrs:{index:e.name,route:e}},[n("i",{staticClass:"ion menuIcon",domProps:{innerHTML:t._s(e.meta.icon)}}),t._v(t._s(e.meta.name||e.name))])}))],2)]:[n("el-menu-item",{key:"nav"+i,attrs:{route:e,index:e.name}},[t._v(t._s(e.meta.name||e.name))])]]}))],2),n("div",{staticClass:"g-statues-bar p-lr"},[n("el-breadcrumb",{staticClass:"bread",attrs:{separator:"/",id:"mybread"}},t._l(t.breadcrumbs,(function(e,i){return n("el-breadcrumb-item",{key:i,attrs:{to:e}},[t._v(" "+t._s(e.meta.name||e.name)+" ")])})),1)],1),"/accounts"==t.$route.path?[n("accounts")]:[n("router-view",{attrs:{id:"main"}})]],2)},a=[],r=(n("bd75"),{components:{accounts:function(){return Promise.resolve().then(n.bind(null,"bd75"))}},data:function(){return{user:this.$root.userData,menus:this.$root.menuData}},computed:{activeMenu:function(){return this.$route.name},breadcrumbs:function(){return this.$route&&this.$route.matched||[]}},methods:{logout:function(){var t=this;this.$confirm("确定退出?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){t.$emit("logout")})).catch((function(){}))}},created:function(){this.user||this.$router.push({path:"/login"})}}),s=r,o=(n("6289"),n("2877")),l=Object(o["a"])(s,i,a,!1,null,"424c17f1",null);e["default"]=l.exports},6289:function(t,e,n){"use strict";n("e73b")},bd75:function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"request",(function(){return l})),n.d(i,"addAdmin",(function(){return c})),n.d(i,"remove",(function(){return u})),n.d(i,"edit",(function(){return d})),n.d(i,"notAllowed",(function(){return m}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"operation"},[n("el-button",{directives:[{name:"has",rawName:"v-has",value:[t.account.request],expression:"[account.request]"}],attrs:{size:"small",type:"primary"},on:{click:t.fetchData}},[t._v("刷新")]),n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"账号",width:"150"}}),n("el-table-column",{attrs:{prop:"role",label:"角色",width:"100"}}),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"200"}}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:t.formateDate}}),n("el-table-column",{attrs:{label:"操作",width:"300",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{directives:[{name:"has",rawName:"v-has",value:[t.account.edit],expression:"[account.edit]"}],attrs:{size:"mini",type:"info"},on:{click:function(n){return t.editAdmin(e.row.id)}}},[t._v("编辑")]),n("el-button",{directives:[{name:"has",rawName:"v-has",value:[t.account.remove],expression:"[account.remove]"}],attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.askDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:"新增管理员",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("add-admin",{on:{insertAdmin:t.insertNewAdmin}})],1),n("el-dialog",{attrs:{title:"编辑管理员",visible:t.editFormVisible},on:{"update:visible":function(e){t.editFormVisible=e}}},[n("add-admin",{attrs:{adminInfo:t.selectedAdminInfo},on:{modifyPwd:t.modifyPwd}})],1)],1)},r=[],s=n("365c"),o="/admin",l={p:["post,/accounts"],r:function(t){return s["a"].post("".concat(o,"/page"),t)}},c={p:["post,/accounts/**"],r:function(t){return s["a"].post("".concat(o,"/add"),t)}},u={p:["post,/account/**"],r:function(t){return s["a"].post("".concat(o,"/delete"),t)}},d={p:["post,/account/**"],r:function(t){return s["a"].post("".concat(o,"/update"),t)}},m={p:["get,/roles/notAllowed"],r:function(t){return s["a"].get("".concat(o,"/roles/notAllowed"),{params:t})}},f=n("3da7"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{disabled:1==t.isDisabled},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"pass"}},[n("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),n("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[n("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")]),n("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)},h=[],b={data:function(){var t=this,e=function(t,e,n){""===e&&n(new Error("用户名不能为空")),n()},n=function(e,n,i){""===n?i(new Error("请输入密码")):(""!==t.ruleForm.checkPass&&t.$refs.ruleForm.validateField("checkPass"),i())},i=function(e,n,i){""===n?i(new Error("请再次输入密码")):n!==t.ruleForm.pass?i(new Error("两次输入密码不一致!")):i()};return{ruleForm:{pass:this.adminInfo?this.adminInfo.password:"",checkPass:this.adminInfo?this.adminInfo.password:"",name:this.adminInfo?this.adminInfo.name:""},rules:{pass:[{validator:n,trigger:"blur"}],checkPass:[{validator:i,trigger:"blur"}],name:[{validator:e,trigger:"blur"}]}}},props:["adminInfo"],computed:{isDisabled:function(){return this.ruleForm={pass:this.adminInfo?this.adminInfo.password:"",checkPass:this.adminInfo?this.adminInfo.password:"",name:this.adminInfo?this.adminInfo.name:""},this.adminInfo?1:0}},methods:{submitForm:function(t){var e=this,n=this;this.$refs[t].validate((function(i){if(!i)return console.log("error submit!!"),!1;n.$loading=!0,e.adminInfo?d.r({password:e.ruleForm.pass,id:e.adminInfo.id}).then((function(t){e.$message.success("密码修改成功"),n.$loading=!1,n.adminInfo.password=n.ruleForm.pass,e.$emit("modifyPwd",n.adminInfo)}),f["b"]):c.r({name:e.ruleForm.name,fullName:e.ruleForm.name,password:e.ruleForm.pass}).then((function(n){e.$message.success("添加成功"),e.$loading=!1,e.$refs[t].resetFields(),e.$emit("insertAdmin",n.data.result)}),f["b"])}))},resetForm:function(t){this.$refs[t].resetFields()}}},v=b,w=n("2877"),g=Object(w["a"])(v,p,h,!1,null,"09090a1c",null),F=g.exports,k={data:function(){return{account:i}}},_={components:{addAdmin:F},mixins:[k],data:function(){return{canReset:!1,list:[],loading:!1,dialogFormVisible:!1,editFormVisible:!1,selectedAdminInfo:null}},methods:{fetchData:function(){var t=this;t.loading=!0,l.r().then((function(e){t.list=e.data.result.data.reverse(),t.loading=!1})).catch((function(e){t.loading=!1,f["b"](e)}))},editAdmin:function(t){var e=this.list.find((function(e){return e.id==t}));this.selectedAdminInfo=e,this.editFormVisible=!0},modifyPwd:function(t){var e=this.list.findIndex((function(e){return e.id==t.id}));this.list.splice(e,1,t),this.editFormVisible=!1},insertNewAdmin:function(t){var e=this;e.list.splice(0,0,t),e.dialogFormVisible=!1},requestNotAllowed:function(){m.r()},formateDate:function(t,e,n,i){return f["d"](n,"MM/dd hh:mm")},askDelete:function(t){var e=this;e.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then((function(){e.deleteAdmin(t)})).catch((function(){}))},deleteAdmin:function(t){var e=this;e.$loading=!0,u.r({id:t}).then((function(n){e.$loading=!1;var i=e.list.findIndex((function(e){return e.id==t}));e.list.splice(i,1)}),f["b"])}},created:function(){this.fetchData()}},$=_,I=Object(w["a"])($,a,r,!1,null,"628a9bf3",null);e["default"]=I.exports},e73b:function(t,e,n){}}]);
//# sourceMappingURL=chunk-54ceb5d2.a0bf6f6f.js.map